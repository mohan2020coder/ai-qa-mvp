<!doctype html>
<html><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>AI QA Agent MVP</title><script src="https://cdn.tailwindcss.com"></script></head>
<body class="bg-slate-50"><div class="max-w-5xl mx-auto p-6">
<h1 class="text-3xl font-bold mb-4">AI QA Agent MVP</h1>
<div class="flex gap-2 mb-4"><input id="urlInput" class="border p-2 rounded w-full" placeholder="Enter website URL (e.g., https://example.com)"/><button id="runBtn" class="bg-blue-600 text-white px-4 py-2 rounded">Run Test</button></div>
<div id="status" class="mb-6 text-sm text-slate-600"></div><div id="runs"></div></div>
<script>
const statusEl=document.getElementById('status'); const runsEl=document.getElementById('runs');
document.getElementById('runBtn').onclick=async()=>{ const url=document.getElementById('urlInput').value.trim(); if(!url) return alert('Please enter a URL'); statusEl.textContent='Submitting...';
const res=await fetch('/api/runs',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({url})}); const data=await res.json(); statusEl.textContent=`Run created: ${data.id} (status: ${data.status})`; setTimeout(loadRuns,2000); };
async function loadRuns(){ const res=await fetch('/api/runs'); const runs=await res.json(); runsEl.innerHTML=runs.map(r=>renderRun(r)).join(''); }
function renderRun(r){ const shots=(r.analysis&&r.analysis.screenshots||[]).map(p=>`<a class="text-blue-700 underline" href="${p}" target="_blank">${p.split('/').pop()}</a>`).join(' &nbsp; ');
const issues=(r.analysis&&r.analysis.issues||[]).map(i=>`<li><span class="font-semibold">${i.severity}</span> â€” ${i.title}: ${i.details}</li>`).join('');
return `<div class="bg-white p-4 rounded-xl shadow mb-4"><div class="flex items-center justify-between"><div><div class="font-semibold">Run ${r.id}</div><div class="text-sm text-slate-600">${r.url}</div></div><div class="px-3 py-1 rounded-full text-sm ${r.status==='completed'?'bg-green-100 text-green-700':'bg-amber-100 text-amber-700'}">${r.status}</div></div>${r.report?`<pre class="whitespace-pre-wrap mt-3 text-sm p-3 bg-slate-50 rounded">${r.report}</pre>`:''}${shots?`<div class="mt-3 text-sm">Screenshots: ${shots}</div>`:''}${issues?`<ul class="mt-3 text-sm list-disc pl-6">${issues}</ul>`:''}</div>`; }
loadRuns(); setInterval(loadRuns,5000);
</script></body></html>
